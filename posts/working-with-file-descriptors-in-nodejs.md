---
card: "/images/default.jpg"
tags: [Node]
author: "Milad E. Fahmy"
title: "Working with file descriptors in Node.js"
created: "2021-08-20T13:40:49+02:00"
modified: "2021-08-20T13:40:49+02:00"
---
<div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-container"><main class="grid-container"><article class="article-reader"><h1 class="article-reader__headline">Working with file descriptors in Node.js</h1><div><p>Before you're able to interact with a file that sits in your filesystem, you must get a file descriptor.</p><p>A file descriptor is a reference to an open file, a number (id) returned by opening the file using the <code class="language-text">open()</code> method offered by the <code class="language-text">fs</code> module. This number (<code class="language-text">fd</code>) uniquely identifies an open file in operating system:</p><pre class="prism-code language-js"><div class="shell-box-top"><span>JS</span><button type="button">copy</button></div><div class="token-line"><span class="token keyword">const</span><span class="token plain"> fs </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">fs</span><span class="token punctuation">.</span><span class="token method function property-access">open</span><span class="token punctuation">(</span><span class="token string">'/Users/joe/test.txt'</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">'r'</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token parameter punctuation">,</span><span class="token parameter"> fd</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">//fd is our file descriptor</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre><p>Notice the <code class="language-text">r</code> we used as the second parameter to the <code class="language-text">fs.open()</code> call.</p><p>That flag means we open the file for reading.</p><p>Other flags you'll commonly use are</p><ul><li><code class="language-text">r+</code> open the file for reading and writing, if file don't exist it won't be created.</li><li><code class="language-text">w+</code> open the file for reading and writing, positioning the stream at the beginning of the file. The file is created if not existing</li><li><code class="language-text">a</code> open the file for writing, positioning the stream at the end of the file. The file is created if not existing</li><li><code class="language-text">a+</code> open the file for reading and writing, positioning the stream at the end of the file. The file is created if not existing</li></ul><p>You can also open the file by using the <code class="language-text">fs.openSync</code> method, which returns the file descriptor, instead of providing it in a callback:</p><pre class="prism-code language-js"><div class="shell-box-top"><span>JS</span><button type="button">copy</button></div><div class="token-line"><span class="token keyword">const</span><span class="token plain"> fs </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword control-flow">try</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> fd </span><span class="token operator">=</span><span class="token plain"> fs</span><span class="token punctuation">.</span><span class="token method function property-access">openSync</span><span class="token punctuation">(</span><span class="token string">'/Users/joe/test.txt'</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">'r'</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword control-flow">catch</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">err</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">error</span><span class="token punctuation">(</span><span class="token plain">err</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre><p>Once you get the file descriptor, in whatever way you choose, you can perform all the operations that require it, like calling <code class="language-text">fs.open()</code> and many other operations that interact with the filesystem.</p></div></article></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div>
