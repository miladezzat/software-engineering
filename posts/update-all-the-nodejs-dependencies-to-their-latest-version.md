---
card: "/images/default.jpg"
tags: [Node]
author: "Milad E. Fahmy"
title: "Update all the Node.js dependencies to their latest version"
created: "2021-08-20T13:40:37+02:00"
modified: "2021-08-20T13:40:37+02:00"
---
<div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-container"><main class="grid-container"><article class="article-reader"><h1 class="article-reader__headline">Update all the Node.js dependencies to their latest version</h1><div><p>When you install a package using <code class="language-text">npm install &lt;packagename&gt;</code>, the latest available version of the package is downloaded and put in the <code class="language-text">node_modules</code> folder, and a corresponding entry is added to the <code class="language-text">package.json</code> and <code class="language-text">package-lock.json</code> files that are present in your current folder.</p><p>npm calculates the dependencies and installs the latest available version of those as well.</p><p>Let's say you install <a href="https://www.npmjs.com/package/cowsay"><code class="language-text">cowsay</code></a>, a cool command line tool that lets you make a cow say <em>things</em>.</p><p>When you <code class="language-text">npm install cowsay</code>, this entry is added to the <code class="language-text">package.json</code> file:</p><pre class="prism-code language-json"><div class="shell-box-top"><span>JSON</span><button type="button">copy</button></div><div class="token-line"><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">"dependencies"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">"cowsay"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"^1.3.1"</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre><p>and this is an extract of <code class="language-text">package-lock.json</code>, where we removed the nested dependencies for clarity:</p><pre class="prism-code language-json"><div class="shell-box-top"><span>JSON</span><button type="button">copy</button></div><div class="token-line"><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">"requires"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">"lockfileVersion"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">"dependencies"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">"cowsay"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"version"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"1.3.1"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"resolved"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"https://registry.npmjs.org/cowsay/-/cowsay-1.3.1.tgz"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"integrity"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"sha512-3PVFe6FePVtPj1HTeLin9v8WyLl+VmM1l1H/5P+BTTDkMAjufp+0F9eLjzRnOHzVAYeIYFF5po5NjRrgefnRMQ=="</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"requires"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token property">"get-stdin"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"^5.0.1"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token property">"optimist"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"~0.6.1"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token property">"string-width"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"~2.1.1"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token property">"strip-eof"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"^1.0.0"</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre><p>Now those 2 files tell us that we installed version <code class="language-text">1.3.1</code> of cowsay, and our rule for updates is <code class="language-text">^1.3.1</code>, which for the npm versioning rules means that npm can update to patch and minor releases: <code class="language-text">1.3.2</code>, <code class="language-text">1.4.0</code> and so on.</p><p>If there is a new minor or patch release and we type <code class="language-text">npm update</code>, the installed version is updated, and the <code class="language-text">package-lock.json</code> file diligently filled with the new version.</p><p>Since npm version 5.0.0, <code class="language-text">npm update</code> will update the <code class="language-text">package.json</code> with the updated version. Use <code class="language-text">npm update --no-save</code> to not update <code class="language-text">package.json</code>.</p><p>To discover new releases of the packages, you run <code class="language-text">npm outdated</code>.</p><p>Here's the list of a few outdated packages in one repository that wasn't updated for quite a while:</p><p><span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:590px">
<a class="gatsby-resp-image-link" href="/static/e967736f8d105e64c22d80ce7a42f52a/ee455/outdated-packages.png" style="display:block" target="_blank" rel="noopener">
<span class="gatsby-resp-image-background-image" style="padding-bottom:66.21621621621621%;position:relative;bottom:0;left:0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC5klEQVQ4y6XSTU8bRxzH8VXp0xV7N6ES3Qc/7POud2e9uzhgjJEdQouxDaSUvSSHpC8AIZmXwCXyoX0RPfcQ6CVqlAb7UokEULFfCvHMr1qjhkj01sNn/pfRVzOa4fD+V2786uXS6V+/PX3398Xe5eV5cnF5kbw/f5ecDt4mf759kwyHw2QwGCSDwTA5PR0m5+eXyXg8TsajUXJ1dbU3Go2enJ2d1QBwXLp01tZ+73Y3sPN4F7uPf8TuD6k9bHd30O1sY7PVRqvVwsbG9+h0WtjZ7qLT6aDdbk/n1tYWjo6O3gCY4TiOm7Fc9zherCIKKteW4VBZzNFiTqNqXp8ydJPm83mqayq1LJUaZpHOz89TSZKocO/e9dzcHPb39/8A8FUa/KxeWzhura+gTOwPoiQxUUyJTJJEpuQUVqvVWBRFrLxaYSQqs+W4yhqNJmtvbjJCyCSXy+Hw8PA1gC+nwUpoHTeqPkqWPjEtFZalTaUbFUVBHMXwywT5igndNRFbAVbrq1h/9AgLcTyRZRm9Xu/1xxMuRe5JsxogLjsTt2TAtjU4zk1QFEUQQuC5JRQCA7bvIHZC1Ffq+G59HVEY3g1Wl72TZjPE4pI38X0TnmcgnUFgwTAKICQA8XwUQhM2cfHAjW+DUXQ3WImdk3qV4EHkTkolA2HowDCKUGQFsizB9wlcx0WBGDBcE2WLoLZcQ7PRQLlcvhtcDOzj1djDQmB/kBWZKYrMZFliknQjDEPmEZ8VQpOZrs0WnJCtrNTZ2sOH7D+v7On6y9BxoKradbGg0pRa1G4UVOrYLrVsi+ZtlaqaSh3Noq7rUs/zqK7r1+nD9Xq9228TlIJXxAth6Q5cy4Nt3kzPIdOpayY0TUM+l4csyZBkCZJ0K328g4ODwb/BmW/u338qCPwvs5nZF5nMbD81+4lMNtPPZrP9LM/3eZ7vCylBmOJ5/oUgCD83m82fnj17/gWXl7+dRjmO+/p/+jwN/QNIxIYuYOed1QAAAABJRU5ErkJggg==');background-size:cover;display:block"></span>
<img class="gatsby-resp-image-image" alt="outdated packages" title="outdated packages" src="/static/e967736f8d105e64c22d80ce7a42f52a/fcda8/outdated-packages.png" srcset="/static/e967736f8d105e64c22d80ce7a42f52a/12f09/outdated-packages.png 148w,/static/e967736f8d105e64c22d80ce7a42f52a/e4a3f/outdated-packages.png 295w,/static/e967736f8d105e64c22d80ce7a42f52a/fcda8/outdated-packages.png 590w,/static/e967736f8d105e64c22d80ce7a42f52a/ee455/outdated-packages.png 863w" sizes="(max-width: 590px) 100vw, 590px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0" loading="lazy" decoding="async">
</a>
</span></p><p>Some of those updates are major releases. Running <code class="language-text">npm update</code> won't update the version of those. Major releases are never updated in this way because they (by definition) introduce breaking changes, and <code class="language-text">npm</code> wants to save you trouble.</p><p>To update all packages to a new major version, install the <code class="language-text">npm-check-updates</code> package globally:</p><pre class="prism-code language-bash"><div class="shell-box-top"><span>BASH</span><button type="button">copy</button></div><div class="token-line"><span class="token function">npm</span><span class="token plain"> </span><span class="token function">install</span><span class="token plain"> -g npm-check-updates</span></div><div class="token-line"><span class="token plain">
</span></div></pre><p>then run it:</p><pre class="prism-code language-bash"><div class="shell-box-top"><span>BASH</span><button type="button">copy</button></div><div class="token-line"><span class="token plain">ncu -u</span></div><div class="token-line"><span class="token plain">
</span></div></pre><p>this will upgrade all the version hints in the <code class="language-text">package.json</code> file, to <code class="language-text">dependencies</code> and <code class="language-text">devDependencies</code>, so npm can install the new major version.</p><p>You are now ready to run the update:</p><pre class="prism-code language-bash"><div class="shell-box-top"><span>BASH</span><button type="button">copy</button></div><div class="token-line"><span class="token function">npm</span><span class="token plain"> update</span></div><div class="token-line"><span class="token plain">
</span></div></pre><p>If you just downloaded the project without the <code class="language-text">node_modules</code> dependencies and you want to install the shiny new versions first, just run</p><pre class="prism-code language-bash"><div class="shell-box-top"><span>BASH</span><button type="button">copy</button></div><div class="token-line"><span class="token function">npm</span><span class="token plain"> </span><span class="token function">install</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre></div></article></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div>
