---
card: "/images/default.jpg"
tags: [Node]
author: "Milad E. Fahmy"
title: "The package-lock.json file"
created: "2021-08-20T13:40:35+02:00"
modified: "2021-08-20T13:40:35+02:00"
---
<div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="layout-container"><main class="grid-container"><article class="article-reader"><h1 class="article-reader__headline">The package-lock.json file</h1><div><p>In version 5, npm introduced the <code class="language-text">package-lock.json</code> file.</p><p>What's that? You probably know about the <code class="language-text">package.json</code> file, which is much more common and has been around for much longer.</p><p>The goal of <code class="language-text">package-lock.json</code> file is to keep track of the exact version of every package that is installed so that a product is 100% reproducible in the same way even if packages are updated by their maintainers.</p><p>This solves a very specific problem that <code class="language-text">package.json</code> left unsolved. In package.json you can set which versions you want to upgrade to (patch or minor), using the <strong>semver</strong> notation, for example:</p><ul><li>if you write <code class="language-text">~0.13.0</code>, you want to only update patch releases: <code class="language-text">0.13.1</code> is ok, but <code class="language-text">0.14.0</code> is not.</li><li>if you write <code class="language-text">^0.13.0</code>, you want to get updates that do not change the leftmost non-zero number: <code class="language-text">0.13.1</code>, <code class="language-text">0.13.2</code> and so on. If you write <code class="language-text">^1.13.0</code>, you will get patch and minor releases: <code class="language-text">1.13.1</code>, <code class="language-text">1.14.0</code> and so on up to <code class="language-text">2.0.0</code>.</li><li>if you write <code class="language-text">0.13.0</code>, that is the exact version that will be used, always</li></ul><p>You don't commit to Git your node_modules folder, which is generally huge, and when you try to replicate the project on another machine by using the <code class="language-text">npm install</code> command, if you specified the <code class="language-text">~</code> syntax and a patch release of a package has been released, that one is going to be installed. Same for <code class="language-text">^</code> and minor releases.</p><blockquote><p>If you specify exact versions, like <code class="language-text">0.13.0</code> in the example, you are not affected by this problem.</p></blockquote><p>It could be you, or another person trying to initialize the project on the other side of the world by running <code class="language-text">npm install</code>.</p><p>So your original project and the newly initialized project are actually different. Even if a patch or minor release should not introduce breaking changes, we all know bugs can (and so, they will) slide in.</p><p>The <code class="language-text">package-lock.json</code> sets your currently installed version of each package <strong>in stone</strong>, and <code class="language-text">npm</code> will use those exact versions when running <code class="language-text">npm install</code>.</p><p>This concept is not new, and other programming languages package managers (like Composer in PHP) use a similar system for years.</p><p>The <code class="language-text">package-lock.json</code> file needs to be committed to your Git repository, so it can be fetched by other people, if the project is public or you have collaborators, or if you use Git as a source for deployments.</p><p>The dependencies versions will be updated in the <code class="language-text">package-lock.json</code> file when you run <code class="language-text">npm update</code>.</p><h2 id="an-example" style="position:relative"><a href="#an-example" aria-label="an example permalink" class="autolink-headers before"><svg aria-hidden="true" height="20" version="1.1" viewBox="0 0 16 16" width="20"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>An example</h2><p>This is an example structure of a <code class="language-text">package-lock.json</code> file we get when we run <code class="language-text">npm install cowsay</code> in an empty folder:</p><pre class="prism-code language-json"><div class="shell-box-top"><span>JSON</span><button type="button">copy</button></div><div class="token-line"><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">"requires"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">"lockfileVersion"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">"dependencies"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">"ansi-regex"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"version"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"3.0.0"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"resolved"</span><span class="token operator">:</span><span class="token plain"> "https</span><span class="token operator">:</span><span class="token comment">//registry.npmjs.org/ansi-regex/-/ansi-regex-3.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">0.0</span><span class="token plain">.tgz"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"integrity"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"sha1-7QMXwyIGT3lGbAKWa922Bas32Zg="</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">"cowsay"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"version"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"1.3.1"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"resolved"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"https://registry.npmjs.org/cowsay/-/cowsay-1.3.1.tgz"</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"integrity"</span><span class="token operator">:</span><span class="token plain"> "sha512-3PVFe6FePVtPj1HTeLin9v8WyLl+VmM1l1H/5P+BTTDkM</span></div><div class="token-line"><span class="token plain">Ajufp+0F9eLjzRnOHzVAYeIYFF5po5NjRrgefnRMQ=="</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"requires"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token property">"get-stdin"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"^5.0.1"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token property">"optimist"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"~0.6.1"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token property">"string-width"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"~2.1.1"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token property">"strip-eof"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"^1.0.0"</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">"get-stdin"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"version"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"5.0.1"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"resolved"</span><span class="token operator">:</span><span class="token plain"> "https</span><span class="token operator">:</span><span class="token comment">//registry.npmjs.org/get-stdin/-/get-stdin-5.0.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token number">1</span><span class="token plain">.tgz"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"integrity"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"sha1-Ei4WFZHiH/TFJTAwVpPyDmOTo5g="</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">"is-fullwidth-code-point"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"version"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"2.0.0"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"resolved"</span><span class="token operator">:</span><span class="token plain"> "https</span><span class="token operator">:</span><span class="token comment">//registry.npmjs.org/is-fullwidth-code-point/-/</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">is-fullwidth-code-point</span><span class="token number">-2.0</span><span class="token plain">.</span><span class="token number">0</span><span class="token plain">.tgz"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"integrity"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"sha1-o7MKXE8ZkYMWeqq5O+764937ZU8="</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">"minimist"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"version"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"0.0.10"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"resolved"</span><span class="token operator">:</span><span class="token plain"> "https</span><span class="token operator">:</span><span class="token comment">//registry.npmjs.org/minimist/-/minimist-0.0.10</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">.tgz"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"integrity"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"sha1-3j+YVD2/lggr5IrRoMfNqDYwHc8="</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">"optimist"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"version"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"0.6.1"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"resolved"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"https://registry.npmjs.org/optimist/-/optimist-0.6.1.tgz"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"integrity"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"sha1-2j6nRob6IaGaERwybpDrFaAZZoY="</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"requires"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token property">"minimist"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"~0.0.1"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token property">"wordwrap"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"~0.0.2"</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">"string-width"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"version"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"2.1.1"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"resolved"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"https://registry.npmjs.org/string-width/-/string-width-2.1.1.tgz"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"integrity"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"sha512-nOqH59deCq9SRHlxq1Aw85Jnt4w6KvLKqWVik6oA9ZklXLNIOlqg4F2yrT1MVaTjAqvVwdfeZ7w7aCvJD7ugkw=="</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"requires"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token property">"is-fullwidth-code-point"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"^2.0.0"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token property">"strip-ansi"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"^4.0.0"</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">"strip-ansi"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"version"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"4.0.0"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"resolved"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"https://registry.npmjs.org/strip-ansi/-/strip-ansi-4.0.0.tgz"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"integrity"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"sha1-qEeQIusaw2iocTibY1JixQXuNo8="</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"requires"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token property">"ansi-regex"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"^3.0.0"</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">"strip-eof"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"version"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"1.0.0"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"resolved"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"https://registry.npmjs.org/strip-eof/-/strip-eof-1.0.0.tgz"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"integrity"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"sha1-u0P/VZim6wXYm1n80SnJgzE2Br8="</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">"wordwrap"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"version"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"0.0.3"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"resolved"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"https://registry.npmjs.org/wordwrap/-/wordwrap-0.0.3.tgz"</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token property">"integrity"</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">"sha1-o9XabNXAvAAI03I0u68b7WMFkQc="</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div></pre><p>We installed <code class="language-text">cowsay</code>, which depends on</p><ul><li><code class="language-text">get-stdin</code></li><li><code class="language-text">optimist</code></li><li><code class="language-text">string-width</code></li><li><code class="language-text">strip-eof</code></li></ul><p>In turn, those packages require other packages, as we can see from the <code class="language-text">requires</code> property that some have:</p><ul><li><code class="language-text">ansi-regex</code></li><li><code class="language-text">is-fullwidth-code-point</code></li><li><code class="language-text">minimist</code></li><li><code class="language-text">wordwrap</code></li><li><code class="language-text">strip-eof</code></li></ul><p>They are added in alphabetical order into the file, and each one has a <code class="language-text">version</code> field, a <code class="language-text">resolved</code> field that points to the package location, and an <code class="language-text">integrity</code> string that we can use to verify the package.</p></div></article></main></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div>
